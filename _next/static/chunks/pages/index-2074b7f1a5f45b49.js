(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5301:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(3951)}])},3951:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return Ae}});var n=t(5893),i=t(9008),a=t(3455),o=t(7044),c=t(6010),s=t(7294),l=t(2461),u=function(e){var r=e.address,t=e.color,i=e.type,a=e.className,u=e.children,d=(0,o.Ge)("INFURA").chainId,f=(0,s.useMemo)((function(){return(0,l.oZ)(i,[d,r])}),[r,d,i]),h=(0,s.useMemo)((function(){return(0,c.Z)(function(e){return"green"===(void 0===e?"white":e)?"underline text-green-500 hover:text-green-400":"underline text-gray-200 hover:text-gray-100"}(t),a)}),[a,t]),v=(0,s.useMemo)((function(){return null!==u&&void 0!==u?u:(0,l.pm)(r)}),[r,u]);return d?(0,n.jsx)("a",{href:f,target:"_blank",rel:"noopener noreferrer",className:h,children:v}):null},d=t(1521),f=t(5666),h=t.n(f),v=t(3288),m=t(1383);function x(e,r,t,n,i,a,o){try{var c=e[a](o),s=c.value}catch(l){return void t(l)}c.done?r(s):Promise.resolve(s).then(n,i)}function b(e){return function(){var r=this,t=arguments;return new Promise((function(n,i){var a=e.apply(r,t);function o(e){x(a,n,i,o,c,"next",e)}function c(e){x(a,n,i,o,c,"throw",e)}o(void 0)}))}}function p(e,r,t,n,i,a,o){try{var c=e[a](o),s=c.value}catch(l){return void t(l)}c.done?r(s):Promise.resolve(s).then(n,i)}var y=function(e){var r,t=(0,m.Z)(e),n=(0,o.Ge)(e),i=n.chainId,a=n.account,c=(0,v.ZP)("Status".concat(i).concat(a),(r=h().mark((function e(){var r,n,i,a,o,c;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.time("useEvilBankStatus"),e.next=3,Promise.all([t.gameId(),t.director(),t.currentBid(),t.endsAt(),t.running(),t.minBid()]);case 3:var s;return s=e.sent,r=s[0],n=s[1],i=s[2],a=s[3],o=s[4],c=s[5],console.timeEnd("useEvilBankStatus"),e.abrupt("return",{gameId:r,director:n,currentBid:i,endsAt:a,running:o,minBid:c});case 6:case"end":return e.stop()}}),e)})),function(){var e=this,t=arguments;return new Promise((function(n,i){var a=r.apply(e,t);function o(e){p(a,n,i,o,c,"next",e)}function c(e){p(a,n,i,o,c,"throw",e)}o(void 0)}))})),l=c.data,u=c.error,d=c.mutate;return(0,s.useEffect)((function(){var e=t.filters.Bid(),r=t.filters.GameStart(),n=function(){return d()};return t.on(e,n),t.on(r,n),function(){t.off(e,n),t.off(r,n)}}),[t,d]),{loading:!l&&!u,error:u,status:l,mutate:d}};function g(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var j,w,N=(j=(0,d.Z)((function(){var e=y("INFURA"),r=e.status,t=e.loading,n=e.error,i=e.mutate,a=function(e,r){var t=(0,m.Z)(r),n=(0,o.Ge)().account,i=(0,o.Ge)(r).chainId,a=(0,v.ZP)(e?"bids-".concat(i,"-").concat(null===e||void 0===e?void 0:e.toHexString()):null,b(h().mark((function r(){var i,a,o;return h().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return console.time("useEvilBankBids"),i=t.filters.Bid(e),r.next=4,t.queryFilter(i);case 4:return a=r.sent,r.next=7,Promise.all(a.map(b(h().mark((function r(t){var i,a,o,c;return h().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:var s;return i=t.transactionHash,s=t.args,a=s.director,o=s.bid,r.next=4,t.getBlock();case 4:return c=r.sent.timestamp,r.abrupt("return",{transactionHash:i,gameId:e,director:a,bid:o,timestamp:c,isCurrentAccount:a===n});case 6:case"end":return r.stop()}}),r)})))));case 7:return o=r.sent.sort((function(e,r){return r.timestamp-e.timestamp})),console.timeEnd("useEvilBankBids"),r.abrupt("return",o);case 10:case"end":return r.stop()}}),r)})))),c=a.data,l=a.error,u=a.mutate;return(0,s.useEffect)((function(){var r=t.filters.Bid(e),n=function(){return u()};return t.on(r,n),function(){t.off(r,n)}}),[t,e,u]),{loading:!c&&!l,error:l,events:c,mutate:u}}(null===r||void 0===r?void 0:r.gameId,"INFURA"),c=a.events,l=a.loading,u=a.error,d=a.mutate;return function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{},n=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),n.forEach((function(r){g(e,r,t[r])}))}return e}({},r,{mutate:(0,s.useCallback)((function(){return Promise.all([i(),d()])}),[d,i]),events:c,loading:t||l,error:n||u})})),w=2,function(e){if(Array.isArray(e))return e}(j)||function(e,r){var t=[],n=!0,i=!1,a=void 0;try{for(var o,c=e[Symbol.iterator]();!(n=(o=c.next()).done)&&(t.push(o.value),!r||t.length!==r);n=!0);}catch(s){i=!0,a=s}finally{try{n||null==c.return||c.return()}finally{if(i)throw a}}return t}(j,w)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()),O=N[0],E=N[1],S=function(){var e=E(),r=e.loading,t=e.error,i=e.events;return r||t||!i?null:(0,n.jsxs)("table",{className:"table-auto w-full text-left",children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{children:"Transaction"}),(0,n.jsx)("th",{children:"Director"}),(0,n.jsx)("th",{className:"text-right",children:"Bid"})]})}),(0,n.jsx)("tbody",{children:i.map((function(e){return(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:(0,n.jsx)(u,{type:"Transaction",address:e.transactionHash,children:new Date(1e3*e.timestamp).toLocaleString()})}),(0,n.jsx)("td",{className:e.isCurrentAccount?"text-green-500":"",children:(0,n.jsx)(u,{type:"Account",address:e.director,color:e.isCurrentAccount?"green":"white"})}),(0,n.jsxs)("td",{className:"text-right font-bold",children:[(0,a.s)(e.bid)," ETH"]})]},e.timestamp)}))})]})},P=t(5553),k=t(2283),I=t(4231),T=t(412),D=function(e){try{return(0,P.fi)(e)}catch(r){}};function A(e,r,t,n,i,a,o){try{var c=e[a](o),s=c.value}catch(l){return void t(l)}c.done?r(s):Promise.resolve(s).then(n,i)}function B(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function C(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{},n=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),n.forEach((function(r){B(e,r,t[r])}))}return e}var F=function(e){return(0,s.useCallback)((r=h().mark((function r(t){var n,i;return h().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,e.validate(t,{abortEarly:!1});case 3:return n=r.sent,r.abrupt("return",{values:n,errors:{}});case 7:return r.prev=7,r.t0=r.catch(0),r.abrupt("return",{values:{},errors:r.t0.inner.reduce((function(e,r){return C({},e,B({},r.path,{type:null!==(i=r.type)&&void 0!==i?i:"validation",message:r.message}))}),{})});case 11:case"end":return r.stop()}}),r,null,[[0,7]])})),function(){var e=this,t=arguments;return new Promise((function(n,i){var a=r.apply(e,t);function o(e){A(a,n,i,o,c,"next",e)}function c(e){A(a,n,i,o,c,"throw",e)}o(void 0)}))}),[e]);var r},H=t(1107),Z=function(e){var r=e.className;return(0,n.jsxs)("svg",{"data-testid":"button-spinner",className:(0,c.Z)("animate-spin",null!==r&&void 0!==r?r:"w-5 h-5"),xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,n.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,n.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})};function G(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function U(e,r){if(null==e)return{};var t,n,i=function(e,r){if(null==e)return{};var t,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)t=a[n],r.indexOf(t)>=0||(i[t]=e[t]);return i}(e,r);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)t=a[n],r.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i}var _=function(e){var r=e.working,t=void 0!==r&&r,i=e.children,a=e.disabled,o=U(e,["working","children","disabled"]);return(0,n.jsxs)(H.z,function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{},n=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),n.forEach((function(r){G(e,r,t[r])}))}return e}({role:"button"},o,{className:"relative",disabled:a||t,children:[(0,n.jsx)("span",{className:t?"invisible":"visible",children:i}),t&&(0,n.jsx)("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2",children:(0,n.jsx)(Z,{className:(0,c.Z)("w-5 h-5")})})]}))};function M(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function R(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{},n=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),n.forEach((function(r){M(e,r,t[r])}))}return e}function V(e,r){if(null==e)return{};var t,n,i=function(e,r){if(null==e)return{};var t,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)t=a[n],r.indexOf(t)>=0||(i[t]=e[t]);return i}(e,r);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)t=a[n],r.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i}var q=(0,s.forwardRef)((function(e,r){var t=e.symbol,i=e.className,a=e.error,o=V(e,["symbol","className","error"]);return(0,n.jsxs)("div",{className:(0,c.Z)("overflow-hidden pr-0 relative flex w-full form-input rounded  bg-gray-700",a?"border-red-500 focus-within:ring-red-500":"focus-within:border-green-500 focus-within:ring-green-500",i),children:[(0,n.jsx)("input",R({ref:r,className:" w-full flex-grow outline-none bg-gray-700 text-white text-right"},o)),(0,n.jsx)("div",{className:"flex flex-col justify-center",children:(0,n.jsx)("span",{className:"text-gray-400 mx-2 h-6 fill-current ",children:t})})]})}));q.displayName="CurrencyInput";var z=t(5769),L=t(3470);var Y=function(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var t=[],n=!0,i=!1,a=void 0;try{for(var o,c=e[Symbol.iterator]();!(n=(o=c.next()).done)&&(t.push(o.value),!r||t.length!==r);n=!0);}catch(s){i=!0,a=s}finally{try{n||null==c.return||c.return()}finally{if(i)throw a}}return t}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}((0,d.Z)((function(){var e,r,t=(0,o.Ge)(),n=t.library,i=t.chainId,a=(0,v.ZP)(["GasPrice",i],(function(){return n.getGasPrice()}),{refreshInterval:6e4}),c=a.data,s=a.error;return{loading:!c&&!s,error:null!==(r=null===s||void 0===s||null===(e=s.data)||void 0===e?void 0:e.message)&&void 0!==r?r:null===s||void 0===s?void 0:s.message,gasprice:c}})),2),X=Y[0],W=Y[1];function $(e,r,t,n,i,a,o){try{var c=e[a](o),s=c.value}catch(l){return void t(l)}c.done?r(s):Promise.resolve(s).then(n,i)}function J(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function K(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var t=[],n=!0,i=!1,a=void 0;try{for(var o,c=e[Symbol.iterator]();!(n=(o=c.next()).done)&&(t.push(o.value),!r||t.length!==r);n=!0);}catch(s){i=!0,a=s}finally{try{n||null==c.return||c.return()}finally{if(i)throw a}}return t}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var Q=function(e,r){var t=(0,L.C)(),n=t.loading,i=t.error,c=t.value,l=W(),u=l.loading,d=l.error,f=l.gasprice,v=(0,m.Z)(),x=K((0,z.Z)(e,200),1)[0],b=(0,s.useMemo)((function(){var e,t=r&&(null===(e=D(x))||void 0===e?void 0:e.gte(r));return{isValid:t,isReady:t&&!n&&!u}}),[x,n,u,r]),p=b.isValid,y=b.isReady,g=(0,s.useState)(!1),j=g[0],w=g[1],N=(0,s.useState)(),O=N[0],E=N[1],S=(0,s.useState)(0),k=S[0],I=S[1],A=(0,o.Ge)().library;(0,s.useEffect)((function(){if(!x)return I(0);var e,r=(e=h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w(!0),e.prev=1,e.t0=I,e.next=5,null===v||void 0===v?void 0:v.estimateGas.bid({value:(0,P.fi)(x)});case 5:e.t1=e.sent,(0,e.t0)(e.t1),e.next=12;break;case 9:e.prev=9,e.t2=e.catch(1),E((0,T.e)(e.t2));case 12:w(!1);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})),function(){var r=this,t=arguments;return new Promise((function(n,i){var a=e.apply(r,t);function o(e){$(a,n,i,o,c,"next",e)}function c(e){$(a,n,i,o,c,"throw",e)}o(void 0)}))});p?r():I(0)}),[x,null===v||void 0===v?void 0:v.estimateGas,p,A.blockNumber]);var B,C=(0,s.useMemo)((function(){if(!y)return{bidETH:"N/A",bidUSD:"N/A",estimateGasETH:"N/A",estimateGasUSD:"N/A",totalETH:"N/A",totalUSD:"N/A"};var e=(0,P.fi)(x),r="".concat((0,a.s)(e)," ETH"),t=Number((0,P.dF)(e))*c,n="".concat(t.toFixed(2)," USD"),i=f.mul(k),o="".concat((0,a.s)(i)," ETH"),s=Number((0,P.dF)(i))*c,l="".concat(s.toFixed(2)," USD"),u=e.add(i),d="".concat((0,a.s)(u)," ETH"),h=Number((0,P.dF)(u))*c;return{bidETH:r,bidUSD:n,estimateGasETH:o,estimateGasUSD:l,totalETH:d,totalUSD:"".concat(h.toFixed(2)," USD")}}),[c,x,k,f,y]);return function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{},n=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),n.forEach((function(r){J(e,r,t[r])}))}return e}({isValid:p,loading:j||u,error:null!==(B=null!==i&&void 0!==i?i:O)&&void 0!==B?B:d},C)},ee=function(e){var r=e.bid,t=e.minBid,i=Q(r,t);return(0,n.jsx)("div",{className:"",children:(0,n.jsx)("table",{className:"w-full table-auto font-bold text-left ",children:(0,n.jsxs)("tbody",{children:[(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{className:"pr-2 font-normal",children:"Bid"}),(0,n.jsx)("td",{className:"px-2 text-right w-40",children:i.bidETH}),(0,n.jsx)("td",{className:"pl-2 text-right w-40 opacity-50",children:i.bidUSD})]}),(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{className:"pr-2 font-normal",children:"Estimated gas"}),(0,n.jsx)("td",{className:"px-2 text-right",children:i.estimateGasETH}),(0,n.jsx)("td",{className:"pl-2 text-right opacity-50",children:i.estimateGasUSD})]}),(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{className:"pr-2",children:"Total cost"}),(0,n.jsx)("td",{className:"px-2 text-right",children:i.totalETH}),(0,n.jsx)("td",{className:"pl-2 text-right opacity-50",children:i.totalUSD})]})]})})})};function re(e,r,t,n,i,a,o){try{var c=e[a](o),s=c.value}catch(l){return void t(l)}c.done?r(s):Promise.resolve(s).then(n,i)}function te(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function ne(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{},n=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),n.forEach((function(r){te(e,r,t[r])}))}return e}var ie=function(){var e,r,t=E(),i=t.minBid,a=t.mutate,o=(0,m.Z)(),c=(0,s.useMemo)((function(){return e=i,(0,I.Ry)({bid:(0,I.Z_)().required().test("is big number","Failed parse the value",(function(e){return!Number.isNaN(e)})).test("is sufficient","Value must be greater or equal than ".concat(e?(0,P.dF)(e):"null"),(function(r){var t;return null===(t=D(r))||void 0===t?void 0:t.gte(null!==e&&void 0!==e?e:0)}))});var e}),[i]),l=F(c),u=(0,k.cI)({resolver:l,mode:"onTouched",reValidateMode:"onChange"}),d=u.register,f=u.handleSubmit,v=u.formState,x=v.errors,b=v.isSubmitting,p=v.isValid,y=v.isValidating,g=u.reset,j=u.watch;(0,s.useEffect)((function(){i&&g({bid:(0,P.dF)(i)})}),[i,g]);var w,N,O=(0,s.useState)(),S=O[0],A=O[1],B=(w=h().mark((function e(r){var t,n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return A(void 0),e.prev=1,t=(0,P.fi)(r.bid),e.next=5,o.bid({value:t});case 5:return n=e.sent,e.next=8,n.wait();case 8:return e.next=10,a();case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),A((0,T.e)(e.t0));case 15:case"end":return e.stop()}}),e,null,[[1,12]])})),function(){var e=this,r=arguments;return new Promise((function(t,n){var i=w.apply(e,r);function a(e){re(i,t,n,a,o,"next",e)}function o(e){re(i,t,n,a,o,"throw",e)}a(void 0)}))}),C=(0,s.useMemo)((function(){return y||b||!p}),[b,p,y]),H=j("bid");return(0,n.jsxs)("form",{onSubmit:f(B),children:[(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsxs)("div",{className:"w-full flex space-x-5 overflow-hidden",children:[(0,n.jsx)(q,ne({symbol:"ETH"},d("bid",{required:!0}),{id:"bid",name:"bid",autoComplete:"off",className:"flex-grow",error:Boolean(null===(e=x.bid)||void 0===e?void 0:e.message)})),(0,n.jsx)(_,{working:b,color:"green",type:"submit",disabled:C,children:"Deposit"})]}),(0,n.jsx)("div",{className:"text-red-500",children:null!==(N=null===(r=x.bid)||void 0===r?void 0:r.message)&&void 0!==N?N:S})]}),(0,n.jsx)("div",{className:"pt-4",children:(0,n.jsx)(ee,{bid:H,minBid:i})})]})},ae=t(7117),oe=t(6083),ce=function(e,r){var t=(0,s.useRef)(e);(0,s.useEffect)((function(){t.current=e}),[e]),(0,s.useEffect)((function(){if(null!==r){var e=setInterval((function(){return t.current()}),r);return function(){return clearInterval(e)}}}),[r])},se=function(e){var r=e.target,t=(0,s.useState)(),i=t[0],a=t[1];return ce((function(){var e=new Date;if(r.valueOf()<e.valueOf())a("FINISHED");else{var t=(0,ae.Z)({start:new Date,end:r});a((0,oe.Z)(t))}}),1e3),(0,n.jsx)("span",{className:"FINISHED"===i?"text-red-500":"text-green-500",children:i})},le=function(){var e=E(),r=e.gameId,t=e.endsAt,i=e.currentBid,o=(0,s.useMemo)((function(){var e=t?new Date(1e3*t.toNumber()):null;return{target:e,isFinished:(null===e||void 0===e?void 0:e.valueOf())<Date.now()}}),[t]),c=o.target,l=o.isFinished;return r?(0,n.jsx)("table",{className:"table-auto w-full text-left",children:(0,n.jsxs)("tbody",{children:[(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:"Current bid"}),(0,n.jsxs)("td",{className:"text-right font-bold",children:[(0,a.s)(i)," ETH"]})]}),(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:"Time left"}),(0,n.jsx)("td",{className:"text-right font-bold",children:(0,n.jsx)(se,{target:c})})]}),l&&(0,n.jsx)("tr",{children:(0,n.jsx)("td",{colSpan:2,className:"text-green-500 text-center",children:"This game beeing finished, next bid will start a new game !"})})]})}):(0,n.jsx)(n.Fragment,{children:"Loading..."})},ue=function(){var e=E().gameId;return e?(0,n.jsxs)(n.Fragment,{children:["Game N\xb0 ",e.toNumber()]}):(0,n.jsx)(n.Fragment,{children:"Loading..."})};var de=function(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var t=[],n=!0,i=!1,a=void 0;try{for(var o,c=e[Symbol.iterator]();!(n=(o=c.next()).done)&&(t.push(o.value),!r||t.length!==r);n=!0);}catch(s){i=!0,a=s}finally{try{n||null==c.return||c.return()}finally{if(i)throw a}}return t}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}((0,d.Z)((function(e){return{color:e.color}})),2),fe=de[0],he=de[1],ve=function(e){switch(e){case"red":return"bg-red-800";default:return"bg-gray-500"}},me=function(e){switch(e){case"red":return"border-red-800";default:return"border-gray-500"}},xe=function(e){var r=e.color,t=void 0===r?"red":r,i=e.children;return(0,n.jsx)(fe,{color:t,children:(0,n.jsxs)("div",{className:(0,c.Z)("relative sm:border-2 inline-block rounded w-full",me(t)),children:[(0,n.jsx)("div",{className:"absolute bg-gray-900 w-full h-full opacity-70 z-[-10]"}),i]})})},be=function(e){var r=e.children;return(0,n.jsx)("div",{className:"p-4",children:r})},pe=function(e){var r=e.large,t=e.children,i=he().color;return(0,n.jsx)("h3",{className:(0,c.Z)(r?"text-xl":"text-l","font-bold uppercase p-2  text-white text-center",ve(i)),children:t})};function ye(e,r,t,n,i,a,o){try{var c=e[a](o),s=c.value}catch(l){return void t(l)}c.done?r(s):Promise.resolve(s).then(n,i)}var ge=function(){var e,r=(0,m.Z)(),t=(0,o.Ge)().account,i=E(),a=i.running,c=i.endsAt,l=i.director,u=(0,s.useState)(!1),d=u[0],f=u[1],v=(0,s.useState)(),x=v[0],b=v[1],p=(0,s.useCallback)((e=h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b(void 0),f(!0),e.prev=2,e.next=5,r.end();case 5:return t=e.sent,e.next=8,t.wait();case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),b((0,T.e)(e.t0));case 13:f(!1);case 14:case"end":return e.stop()}}),e,null,[[2,10]])})),function(){var r=this,t=arguments;return new Promise((function(n,i){var a=e.apply(r,t);function o(e){ye(a,n,i,o,c,"next",e)}function c(e){ye(a,n,i,o,c,"throw",e)}o(void 0)}))}),[r]);return t!==l||!a||1e3*(null===c||void 0===c?void 0:c.toNumber())>Date.now()?null:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(pe,{children:"Manual ending"}),(0,n.jsxs)(be,{children:[(0,n.jsxs)("div",{children:["As the last director of this game, you may end it manually and receive your deposit right away. This action will cost some gas.",(0,n.jsx)("br",{}),"You may also wait for someone to start the next game to receive your funds automatically."]}),(0,n.jsx)("div",{className:"text-center",children:(0,n.jsx)(_,{onClick:p,working:d,color:"green",compact:!0,children:"End game"})}),(0,n.jsx)("div",{className:"text-red-500",children:x})]})]})},je=t(1422),we=t(1187);function Ne(e,r,t,n,i,a,o){try{var c=e[a](o),s=c.value}catch(l){return void t(l)}c.done?r(s):Promise.resolve(s).then(n,i)}var Oe=function(e){var r=e.children,t=(0,o.Ge)("INFURA").chainId,i=(0,o.Ge)(),a=i.account,c=i.library,l=i.error,u=i.chainId,d=(0,s.useMemo)((function(){return"string"===typeof a&&!!c}),[a,c]),f=(0,s.useMemo)((function(){return"UnsupportedChainIdError"===(null===l||void 0===l?void 0:l.name)}),[null===l||void 0===l?void 0:l.name]);return(0,s.useEffect)((function(){var e,r=(e=h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{null===c||void 0===c||c.send("wallet_switchEthereumChain",[{chainId:"0x"+t.toString(16)}])}catch(r){console.error("chainConnect",r)}case 1:case"end":return e.stop()}}),e)})),function(){var r=this,t=arguments;return new Promise((function(n,i){var a=e.apply(r,t);function o(e){Ne(a,n,i,o,c,"next",e)}function c(e){Ne(a,n,i,o,c,"throw",e)}o(void 0)}))});t&&u&&u!=t&&r()}),[u,t,c]),l&&console.error("Connected",{error:l}),d?(0,n.jsx)(n.Fragment,{children:r}):f?(0,n.jsx)(je.e,{}):(0,n.jsx)(we.o,{})},Ee=function(e){var r=e.children;return E().loading?(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("div",{style:{borderTopColor:"transparent"},className:"inline-block w-12 h-12 border-4 border-yellow-500 border-solid rounded-full animate-spin"}),(0,n.jsx)("div",{className:"text-yellow-500",children:"Connecting to Ethereum..."})]}):(0,n.jsx)(n.Fragment,{children:r})},Se=function(){return(0,n.jsx)(O,{children:(0,n.jsx)(Ee,{children:(0,n.jsxs)(xe,{children:[(0,n.jsx)(pe,{large:!0,children:(0,n.jsx)(ue,{})}),(0,n.jsx)(be,{children:(0,n.jsx)(le,{})}),(0,n.jsx)(ge,{}),(0,n.jsx)(pe,{children:"Become the new director"}),(0,n.jsx)(be,{children:(0,n.jsx)(Oe,{children:(0,n.jsx)(ie,{})})}),(0,n.jsx)(pe,{children:"Bids"}),(0,n.jsx)(be,{children:(0,n.jsx)(S,{})})]})})})},Pe=function(){return(0,n.jsxs)("div",{className:"text-left inline-block p-4",children:[(0,n.jsx)("h1",{className:"font-bold text-6xl mb-10 text-center text-red-600",style:{fontFamily:"Nosifer"},children:"ETHvil Bank"}),(0,n.jsxs)("div",{className:"my-4 text-sm text-yellow-500",children:["This application is a demo & portfolio app, therefore it is only connected to the Ropsten Test Network, for now. You may obtain free ETH for this network from a"," ",(0,n.jsx)("a",{className:"underline hover:text-yellow-400",href:"https://duckduckgo.com/?q=ropsten+faucet",children:"Ropsten faucet"}),"."]}),(0,n.jsxs)("div",{children:["Contract"," ",(0,n.jsx)(u,{type:"Account",address:"0xC079d079c226d795f6587DDd20d993349d0841DD"})," ",":"]}),(0,n.jsxs)("ul",{className:"list-disc pl-5",children:[(0,n.jsx)("li",{children:"Bid at least 10% more than the previous director to become the director of the bank."}),(0,n.jsx)("li",{children:"If another person becomes the director within 5 minutes, you will receive your bid + 5% bonus. Owner of the contract also gets 1%."}),(0,n.jsx)("li",{children:"If noone becomes a director after you within 5 minutes, you will get at least 95% of your bid back."})]})]})},ke=t(2923),Ie=t(5744),Te=t(9057),De=t(1271);var Ae=function(){return(0,n.jsxs)("div",{className:"min-h-screen flex flex-col",children:[(0,n.jsx)(i.default,{children:(0,n.jsx)("title",{children:"ETHvil Bank"})}),(0,n.jsx)(ke.h,{children:(0,n.jsx)(Ie.Y,{})}),(0,n.jsx)("div",{className:"container mx-auto max-w-2xl py-4 flex-grow",children:(0,n.jsxs)("main",{children:[(0,n.jsx)(Pe,{}),(0,n.jsx)("div",{className:"my-4 space-y-8",children:(0,n.jsx)(De.Z,{children:(0,n.jsx)(X,{children:(0,n.jsx)(Se,{})})})})]})}),(0,n.jsx)(Te.$,{})]})}}},function(e){e.O(0,[445,162,190,628,774,888,179],(function(){return r=5301,e(e.s=r);var r}));var r=e.O();_N_E=r}]);