(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[461],{2601:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/games/[id]",function(){return r(5737)}])},6244:function(e,t,r){"use strict";r.d(t,{Z:function(){return i}});var n=r(5893),i=function(e){var t=e.children;return(0,n.jsx)("div",{className:"p-4",children:t})}},5737:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return D}});var n=r(5893),i=r(9706),s=r(1163),a=r(7294),d=r(4930),c=r(6244),o=r(3738),l=r(3455),u=r(5955),h=r(3471),x=r(8687),m=r(1521),j=r(821),f=r(9921);var g,b,N=(g=(0,m.Z)((function(e){var t=e.id,r=(0,f.L)(),n=r.subgraph,i=r.chainId,s=(0,j.ZP)("game-history-".concat(i,"-").concat(t),(function(){return(0,x.request)(n,"{\n    games(where:{id:".concat(t,"}) {\n      id\n      start\n      end\n      director\n      bids(orderBy:timestamp, orderDirection:desc) {\n        id\n        amount\n        director\n        timestamp\n      }\n    }\n  }"))})),d=s.data,c=void 0===d?{games:[]}:d,o=s.error,l=s.mutate,u=(0,a.useMemo)((function(){return{loading:!c&&!o,game:c.games[0]}}),[c,o]),h=u.loading,m=u.game;return{loading:h,error:o,game:m,mutate:l}})),b=2,function(e){if(Array.isArray(e))return e}(g)||function(e,t){var r=[],n=!0,i=!1,s=void 0;try{for(var a,d=e[Symbol.iterator]();!(n=(a=d.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,s=c}finally{try{n||null==d.return||d.return()}finally{if(i)throw s}}return r}(g,b)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()),p=N[0],v=N[1],y=function(){var e=v().game,t=(0,u.O)().account;return(0,n.jsxs)("table",{className:"table-auto w-full text-left",children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{children:"Transaction"}),(0,n.jsx)("th",{children:"Director"}),(0,n.jsx)("th",{className:"text-right",children:"Deposit"})]})}),(0,n.jsx)("tbody",{children:e.bids.map((function(e){return(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:(0,n.jsx)(h.G,{type:"Transaction",address:e.id,children:new Date(1e3*Number(e.timestamp)).toLocaleString()})}),(0,n.jsx)("td",{className:e.director===t?"text-green-500":"",children:(0,n.jsx)(h.G,{type:"Account",address:e.director,color:e.director===t?"green":"white",withIcon:!0})}),(0,n.jsxs)("td",{className:"text-right font-bold",children:[(0,l.s)(e.amount)," ETH"]})]},e.timestamp)}))})]})},w=function(){var e=v().game;return(0,n.jsx)("table",{className:"table-auto w-full text-left",children:(0,n.jsxs)("tbody",{children:[(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:"Winner"}),(0,n.jsx)("td",{className:"text-right font-bold",children:(0,n.jsx)(h.G,{type:"Account",address:e.director,withIcon:!0})})]}),(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:"Last deposit"}),(0,n.jsxs)("td",{className:"text-right font-bold",children:[(0,l.s)(e.bids[0].amount)," ETH"]})]}),(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:"Start"}),(0,n.jsx)("td",{className:"text-right font-bold",children:new Date(1e3*Number(e.start)).toLocaleString()})]}),(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:"End"}),(0,n.jsx)("td",{className:"text-right font-bold",children:e.end?new Date(1e3*Number(e.end)).toLocaleString():"IN PROGRESS"})]})]})})},_=function(e){var t=e.children,r=(0,f.L)(),i=v(),s=i.loading,a=i.game;return s||!a?(0,n.jsxs)("div",{className:"text-center my-10",children:[(0,n.jsx)("div",{style:{borderTopColor:"transparent"},className:"inline-block w-12 h-12 border-4 border-yellow-500 border-solid rounded-full animate-spin"}),(0,n.jsxs)("div",{className:"text-yellow-500",children:["Connecting to ",r.fullname,"..."]})]}):(0,n.jsx)(n.Fragment,{children:t})},E=function(){var e=v().game;return(0,n.jsxs)(n.Fragment,{children:["Game N\xb0 ",Number(e.id).toLocaleString()," (history)"]})},T=function(){var e=(0,s.useRouter)(),t=(0,a.useMemo)((function(){return Number(e.query.id)}),[e.query.id]);return(0,n.jsx)(p,{id:t,children:(0,n.jsx)(_,{children:(0,n.jsxs)(d.$,{children:[(0,n.jsx)(o.N,{large:!0,children:(0,n.jsx)(E,{})}),(0,n.jsx)(c.Z,{children:(0,n.jsx)(w,{})}),(0,n.jsx)(o.N,{children:"Deposits"}),(0,n.jsx)(c.Z,{children:(0,n.jsx)(y,{})})]})})})},S=r(560),D=function(){return(0,n.jsx)(S.Z,{title:"Game History - ETHvil Bank",children:(0,n.jsx)(i.V,{children:(0,n.jsx)(T,{})})})}}},function(e){e.O(0,[445,267,687,792,774,888,179],(function(){return t=2601,e(e.s=t);var t}));var t=e.O();_N_E=t}]);