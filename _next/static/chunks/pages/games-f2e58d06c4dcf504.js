(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[451],{7603:function(e,n,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/games",function(){return r(8868)}])},8868:function(e,n,r){"use strict";r.r(n),r.d(n,{default:function(){return k}});var t=r(5893),a=r(9008),i=r(1271),o=r(9057),s=r(5666),c=r.n(s),u=r(7044),l=r(1521),d=r(3288),m=r(1383);function f(e,n,r,t,a,i,o){try{var s=e[i](o),c=s.value}catch(u){return void r(u)}s.done?n(c):Promise.resolve(c).then(t,a)}function v(e){return function(){var n=this,r=arguments;return new Promise((function(t,a){var i=e.apply(n,r);function o(e){f(i,t,a,o,s,"next",e)}function s(e){f(i,t,a,o,s,"throw",e)}o(void 0)}))}}var h,x,p=(h=(0,l.Z)((function(){var e=(0,m.Z)("INFURA"),n=(0,u.Ge)("INFURA").chainId,r=(0,d.ZP)("gameends-".concat(n),v(c().mark((function n(){var r,t,a;return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return console.time("useEvilBankGameEnds"),r=e.filters.GameEnd(),n.next=4,e.queryFilter(r);case 4:return t=n.sent,n.next=7,Promise.all(t.map(v(c().mark((function e(n){var r,t,a,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.getBlock();case 2:var o;return r=e.sent.timestamp,o=n.args,t=o.gameId,a=o.director,i=o.amount,e.abrupt("return",{gameId:t,director:a,amount:i,timestamp:r});case 5:case"end":return e.stop()}}),e)})))));case 7:return a=n.sent.sort((function(e,n){return n.timestamp-e.timestamp})),console.timeEnd("useEvilBankGameEnds"),n.abrupt("return",a);case 10:case"end":return n.stop()}}),n)})))),t=r.data,a=r.error,i=r.mutate;return console.log({error:a,games:t}),{loading:!t&&!a,error:a,games:t,mutate:i}})),x=2,function(e){if(Array.isArray(e))return e}(h)||function(e,n){var r=[],t=!0,a=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(t=(o=s.next()).done)&&(r.push(o.value),!n||r.length!==n);t=!0);}catch(c){a=!0,i=c}finally{try{t||null==s.return||s.return()}finally{if(a)throw i}}return r}(h,x)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()),w=p[0],g=p[1],j=r(3455),y=function(){return(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{style:{borderTopColor:"transparent"},className:"inline-block w-12 h-12 border-4 border-yellow-500 border-solid rounded-full animate-spin"}),(0,t.jsx)("div",{className:"text-yellow-500",children:"Connecting to Ethereum..."})]})},E=function(){var e=g(),n=e.games,r=e.loading,a=e.error;return console.log("history"),r?(0,t.jsx)(y,{}):a?(0,t.jsx)("div",{children:a.toString()}):(0,t.jsx)("div",{children:null===n||void 0===n?void 0:n.map((function(e){var n=e.gameId,r=e.timestamp,a=(e.director,e.amount);return(0,t.jsxs)("div",{children:[n.toNumber()," - ended on"," ",new Date(1e3*r).toLocaleString()," -"," ",(0,j.s)(a)," ETH"]},n.toNumber())}))})},N=function(){return(0,t.jsx)(w,{children:(0,t.jsx)(E,{})})},b=r(2923),_=r(5744),k=function(){return(0,t.jsxs)("div",{className:"min-h-screen flex flex-col",children:[(0,t.jsx)(a.default,{children:(0,t.jsx)("title",{children:"All games - ETHvil Bank"})}),(0,t.jsx)(b.h,{children:(0,t.jsx)(_.Y,{})}),(0,t.jsx)("div",{className:"container mx-auto max-w-2xl py-4 flex-grow",children:(0,t.jsx)("main",{children:(0,t.jsx)("div",{className:"my-4 space-y-8",children:(0,t.jsx)(i.Z,{children:(0,t.jsx)(N,{})})})})}),(0,t.jsx)(o.$,{})]})}}},function(e){e.O(0,[445,162,628,774,888,179],(function(){return n=7603,e(e.s=n);var n}));var n=e.O();_N_E=n}]);