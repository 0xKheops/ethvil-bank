(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5301:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(7681)}])},6244:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(5893),i=function(e){var t=e.children;return(0,r.jsx)("div",{className:"p-4",children:t})}},7681:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return je}});var r=n(5893),i=n(3455),a=n(3074),u=n(3471),s=n(1521),o=n(7294),c=n(8520),l=n.n(c),d=n(7044),f=n(821),p=JSON.parse('[{"inputs":[{"internalType":"uint256","name":"min","type":"uint256"}],"name":"InsufficientBid","type":"error"},{"inputs":[],"name":"NothingToWithdraw","type":"error"},{"inputs":[{"internalType":"uint256","name":"endsAt","type":"uint256"}],"name":"ToEarlyToEnd","type":"error"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"uint256","name":"gameId","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"bid","type":"uint256"},{"indexed":false,"internalType":"address","name":"director","type":"address"}],"name":"Bid","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"uint256","name":"gameId","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"amount","type":"uint256"},{"indexed":false,"internalType":"address","name":"director","type":"address"}],"name":"GameEnd","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"uint256","name":"gameId","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"bid","type":"uint256"},{"indexed":false,"internalType":"address","name":"director","type":"address"}],"name":"GameStart","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"inputs":[],"name":"bid","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[],"name":"currentBid","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"director","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"directorRewardPercent","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"duration","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"end","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"endsAt","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"gameBalance","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"gameId","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"minBid","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"minBidIncreasePercent","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"minStartBid","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"ownerRewardPercent","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"renounceOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"running","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_directorRewardPercent","type":"uint256"}],"name":"setDirectorRewardPercent","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_duration","type":"uint256"}],"name":"setDuration","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_minBidIncreasePercent","type":"uint256"}],"name":"setMinBidIncreasePercent","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_ownerRewardPercent","type":"uint256"}],"name":"setOwnerRewardPercent","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"newOwner","type":"address"}],"name":"transferOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"withdraw","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"withdrawable","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"}]'),m=n(6076);var y=n(9921);function v(e){return function(e,t,n){var r=(0,d.Ge)(n),i=r.library,a=r.account,u=r.chainId;return(0,o.useMemo)((function(){if(!e||!t||!i||!u)return null;try{return new m.CH(e,t,a?i.getSigner(a):i)}catch(n){return console.error("Failed To Get Contract",n),null}}),[e,t,i,u,a])}((0,y.L)().contract,p,e)}function h(e,t,n,r,i,a,u){try{var s=e[a](u),o=s.value}catch(c){return void n(c)}s.done?t(o):Promise.resolve(o).then(r,i)}function b(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function u(e){h(a,r,i,u,s,"next",e)}function s(e){h(a,r,i,u,s,"throw",e)}u(void 0)}))}}function x(e,t,n,r,i,a,u){try{var s=e[a](u),o=s.value}catch(c){return void n(c)}s.done?t(o):Promise.resolve(o).then(r,i)}function w(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var u,s=e[Symbol.iterator]();!(r=(u=s.next()).done)&&(n.push(u.value),!t||n.length!==t);r=!0);}catch(o){i=!0,a=o}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var g=function(e){var t,n=v(e),r=(0,d.Ge)(e),i=r.chainId,a=r.account,u=(0,f.ZP)("Status".concat(i).concat(a),(t=l().mark((function e(){var t,r,i,a,u,s,o,c;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=w,e.next=3,Promise.all([n.gameId(),n.director(),n.currentBid(),n.endsAt(),n.running(),n.minBid(),n.duration()]);case 3:return e.t1=e.sent,t=(0,e.t0)(e.t1,7),r=t[0],i=t[1],a=t[2],u=t[3],s=t[4],o=t[5],c=t[6],e.abrupt("return",{address:n.address,gameId:r,director:i,currentBid:a,endsAt:u,running:s,minBid:o,duration:c});case 13:case"end":return e.stop()}}),e)})),function(){var e=this,n=arguments;return new Promise((function(r,i){var a=t.apply(e,n);function u(e){x(a,r,i,u,s,"next",e)}function s(e){x(a,r,i,u,s,"throw",e)}u(void 0)}))})),s=u.data,c=u.error,p=u.mutate;return(0,o.useEffect)((function(){var e=n.filters.Bid(),t=n.filters.GameStart(),r=function(){return p()};return n.on(e,r),n.on(t,r),function(){n.off(e,r),n.off(t,r)}}),[n,p]),{loading:!s&&!c,error:c,status:s,mutate:p}};function j(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var N,T,O=(N=(0,s.Z)((function(){var e=g("INFURA"),t=e.status,n=e.loading,r=e.error,i=e.mutate,a=function(e,t){var n=v(t),r=(0,d.Ge)().account,i=(0,d.Ge)(t).chainId,a=(0,f.ZP)(e?"bids-".concat(i,"-").concat(null===e||void 0===e?void 0:e.toHexString()):null,b(l().mark((function t(){var i,a,u;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=n.filters.Bid(e),t.next=3,n.queryFilter(i);case 3:return a=t.sent,t.next=6,Promise.all(a.map(b(l().mark((function t(n){var i,a,u,s,o;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=n.transactionHash,a=n.args,u=a.director,s=a.bid,t.next=4,n.getBlock();case 4:return o=t.sent.timestamp,t.abrupt("return",{transactionHash:i,gameId:e,director:u,bid:s,timestamp:o,isCurrentAccount:u===r});case 6:case"end":return t.stop()}}),t)})))));case 6:return u=t.sent.sort((function(e,t){return t.timestamp-e.timestamp})),t.abrupt("return",u);case 8:case"end":return t.stop()}}),t)})))),u=a.data,s=a.error,c=a.mutate;return(0,o.useEffect)((function(){var t=n.filters.Bid(e),r=function(){return c()};return n.on(t,r),function(){n.off(t,r)}}),[n,e,c]),{loading:!u&&!s,error:s,events:u,mutate:c}}(null===t||void 0===t?void 0:t.gameId,"INFURA"),u=a.events,s=a.loading,c=a.error,p=a.mutate;return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){j(e,t,n[t])}))}return e}({},t,{mutate:(0,o.useCallback)((function(){return Promise.all([i((function(e){return e}),!0),p((function(e){return e}),!0)])}),[p,i]),events:u,loadingStatus:n,loadingEvents:s,loading:n||s,error:r||c})})),T=2,function(e){if(Array.isArray(e))return e}(N)||function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var u,s=e[Symbol.iterator]();!(r=(u=s.next()).done)&&(n.push(u.value),!t||n.length!==t);r=!0);}catch(o){i=!0,a=o}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}(N,T)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()),S=O[0],P=O[1],E=function(){return(0,r.jsx)("div",{className:"w-full text-center ",children:(0,r.jsxs)("div",{className:"inline-flex gap-2 text-yellow-500",children:[(0,r.jsx)("span",{children:(0,r.jsx)(a.X4,{})}),(0,r.jsx)("span",{children:"Loading..."})]})})},I=function(){var e=P(),t=e.loading,n=e.error,a=e.events;return t?(0,r.jsx)(E,{}):t||n||!a?null:(0,r.jsxs)("table",{className:"table-auto w-full text-left",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{children:"Transaction"}),(0,r.jsx)("th",{children:"Director"}),(0,r.jsx)("th",{className:"text-right",children:"Deposit"})]})}),(0,r.jsx)("tbody",{children:a.map((function(e){return(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:(0,r.jsx)(u.G,{type:"Transaction",address:e.transactionHash,children:new Date(1e3*e.timestamp).toLocaleString()})}),(0,r.jsx)("td",{className:e.isCurrentAccount?"text-green-500":"",children:(0,r.jsx)(u.G,{type:"Account",address:e.director,color:e.isCurrentAccount?"green":"white",withIcon:!0})}),(0,r.jsxs)("td",{className:"text-right font-bold",children:[(0,i.s)(e.bid)," ETH"]})]},e.timestamp)}))})]})},k=n(5553),M=n(7536),D=n(4231),A=n(412),G=function(e){try{return(0,k.fi)(e)}catch(t){}};function B(e,t,n,r,i,a,u){try{var s=e[a](u),o=s.value}catch(c){return void n(c)}s.done?t(o):Promise.resolve(o).then(r,i)}function H(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function F(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){H(e,t,n[t])}))}return e}var C=function(e){return(0,o.useCallback)((t=l().mark((function t(n){var r,i;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.validate(n,{abortEarly:!1});case 3:return r=t.sent,t.abrupt("return",{values:r,errors:{}});case 7:return t.prev=7,t.t0=t.catch(0),t.abrupt("return",{values:{},errors:t.t0.inner.reduce((function(e,t){return F({},e,H({},t.path,{type:null!==(i=t.type)&&void 0!==i?i:"validation",message:t.message}))}),{})});case 11:case"end":return t.stop()}}),t,null,[[0,7]])})),function(){var e=this,n=arguments;return new Promise((function(r,i){var a=t.apply(e,n);function u(e){B(a,r,i,u,s,"next",e)}function s(e){B(a,r,i,u,s,"throw",e)}u(void 0)}))}),[e]);var t},Z=n(1856),_=n(6010);function U(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function R(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){U(e,t,n[t])}))}return e}function L(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var V=(0,o.forwardRef)((function(e,t){var n=e.symbol,i=e.className,a=e.error,u=L(e,["symbol","className","error"]);return(0,r.jsxs)("div",{className:(0,_.Z)("overflow-hidden pr-0 relative flex w-full form-input rounded  bg-gray-700",a?"border-red-500 focus-within:ring-red-500":"focus-within:border-green-500 focus-within:ring-green-500",i),children:[(0,r.jsx)("input",R({ref:t,className:" w-full flex-grow outline-none bg-gray-700 text-white text-right"},u)),(0,r.jsx)("div",{className:"flex flex-col justify-center",children:(0,r.jsx)("span",{className:"text-gray-400 mx-2 h-6 fill-current ",children:n})})]})}));V.displayName="CurrencyInput";var q=n(5769),X=n(3470);var K=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var u,s=e[Symbol.iterator]();!(r=(u=s.next()).done)&&(n.push(u.value),!t||n.length!==t);r=!0);}catch(o){i=!0,a=o}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}((0,s.Z)((function(){var e,t,n=(0,d.Ge)(),r=n.library,i=n.chainId,a=(0,f.ZP)(["GasPrice",i],(function(){return r.getGasPrice()}),{refreshInterval:6e4}),u=a.data,s=a.error;return{loading:!u&&!s,error:null!==(t=null===s||void 0===s||null===(e=s.data)||void 0===e?void 0:e.message)&&void 0!==t?t:null===s||void 0===s?void 0:s.message,gasprice:u}})),2),Y=K[0],$=K[1];function J(e,t,n,r,i,a,u){try{var s=e[a](u),o=s.value}catch(c){return void n(c)}s.done?t(o):Promise.resolve(o).then(r,i)}function W(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function z(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var u,s=e[Symbol.iterator]();!(r=(u=s.next()).done)&&(n.push(u.value),!t||n.length!==t);r=!0);}catch(o){i=!0,a=o}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var Q=function(e,t){var n=(0,X.C)(),r=n.loading,a=n.error,u=n.value,s=$(),c=s.loading,f=s.error,p=s.gasprice,m=v(),y=z((0,q.Z)(e,200),1)[0],h=(0,o.useMemo)((function(){var e,n=t&&(null===(e=G(y))||void 0===e?void 0:e.gte(t));return{isValid:n,isReady:n&&!r&&!c}}),[y,r,c,t]),b=h.isValid,x=h.isReady,w=(0,o.useState)(!1),g=w[0],j=w[1],N=(0,o.useState)(),T=N[0],O=N[1],S=(0,o.useState)(0),P=S[0],E=S[1],I=(0,d.Ge)().library;(0,o.useEffect)((function(){if(!y)return E(0);var e,t=(e=l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return j(!0),e.prev=1,e.t0=E,e.next=5,null===m||void 0===m?void 0:m.estimateGas.bid({value:(0,k.fi)(y)});case 5:e.t1=e.sent,(0,e.t0)(e.t1),e.next=12;break;case 9:e.prev=9,e.t2=e.catch(1),O((0,A.e)(e.t2));case 12:j(!1);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})),function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function u(e){J(a,r,i,u,s,"next",e)}function s(e){J(a,r,i,u,s,"throw",e)}u(void 0)}))});b?t():E(0)}),[y,null===m||void 0===m?void 0:m.estimateGas,b,I.blockNumber]);var M,D=(0,o.useMemo)((function(){if(!x)return{bidETH:"N/A",bidUSD:"N/A",estimateGasETH:"N/A",estimateGasUSD:"N/A",totalETH:"N/A",totalUSD:"N/A"};var e=(0,k.fi)(y),t="".concat((0,i.s)(e)," ETH"),n=Number((0,k.dF)(e))*u,r="".concat(n.toFixed(2)," USD"),a=p.mul(P),s="".concat((0,i.s)(a)," ETH"),o=Number((0,k.dF)(a))*u,c="".concat(o.toFixed(2)," USD"),l=e.add(a),d="".concat((0,i.s)(l)," ETH"),f=Number((0,k.dF)(l))*u;return{bidETH:t,bidUSD:r,estimateGasETH:s,estimateGasUSD:c,totalETH:d,totalUSD:"".concat(f.toFixed(2)," USD")}}),[u,y,P,p,x]);return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){W(e,t,n[t])}))}return e}({isValid:b,loading:g||c,error:null!==(M=null!==a&&void 0!==a?a:T)&&void 0!==M?M:f},D)},ee=function(e){var t=e.bid,n=e.minBid,i=Q(t,n);return(0,r.jsx)("div",{className:"",children:(0,r.jsx)("table",{className:"w-full table-auto font-bold text-left ",children:(0,r.jsxs)("tbody",{children:[(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{className:"pr-2 font-normal",children:"Deposit"}),(0,r.jsx)("td",{className:"px-2 text-right w-40",children:i.bidETH}),(0,r.jsx)("td",{className:"pl-2 text-right w-40 opacity-50",children:i.bidUSD})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{className:"pr-2 font-normal",children:"Estimated gas"}),(0,r.jsx)("td",{className:"px-2 text-right",children:i.estimateGasETH}),(0,r.jsx)("td",{className:"pl-2 text-right opacity-50",children:i.estimateGasUSD})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{className:"pr-2",children:"Total cost"}),(0,r.jsx)("td",{className:"px-2 text-right",children:i.totalETH}),(0,r.jsx)("td",{className:"pl-2 text-right opacity-50",children:i.totalUSD})]})]})})})};function te(e,t,n,r,i,a,u){try{var s=e[a](u),o=s.value}catch(c){return void n(c)}s.done?t(o):Promise.resolve(o).then(r,i)}function ne(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function re(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){ne(e,t,n[t])}))}return e}var ie=function(){var e,t,n=(0,o.useState)(!1),i=n[0],a=n[1],u=P().minBid,s=v(),c=(0,o.useMemo)((function(){return e=u,(0,D.Ry)({bid:(0,D.Z_)().required().test("is big number","Failed parse the value",(function(e){return!Number.isNaN(e)})).test("is sufficient","Value must be greater or equal than ".concat(e?(0,k.dF)(e):"null"),(function(t){var n;return null===(n=G(t))||void 0===n?void 0:n.gte(null!==e&&void 0!==e?e:0)}))});var e}),[u]),d=C(c),f=(0,M.cI)({resolver:d,mode:"onTouched",reValidateMode:"onChange"}),p=f.register,m=f.handleSubmit,y=f.formState,h=y.errors,b=y.isSubmitting,x=y.isValid,w=y.isValidating,g=f.reset,j=f.watch;(0,o.useEffect)((function(){u&&g({bid:(0,k.dF)(u)})}),[u,g]);var N,T,O=(0,o.useState)(),S=O[0],E=O[1],I=(N=l().mark((function e(t){var n,r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return E(void 0),a(!0),e.prev=2,n=(0,k.fi)(t.bid),e.next=6,s.bid({value:n});case 6:return r=e.sent,e.next=9,r.wait();case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),E((0,A.e)(e.t0));case 14:a(!1);case 15:case"end":return e.stop()}}),e,null,[[2,11]])})),function(){var e=this,t=arguments;return new Promise((function(n,r){var i=N.apply(e,t);function a(e){te(i,n,r,a,u,"next",e)}function u(e){te(i,n,r,a,u,"throw",e)}a(void 0)}))}),B=(0,o.useMemo)((function(){return w||b||!x||i}),[b,x,w,i]),H=(0,o.useMemo)((function(){return b||i}),[b,i]),F=j("bid");return(0,r.jsxs)("form",{onSubmit:m(I),children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsxs)("div",{className:"w-full flex space-x-5 overflow-hidden",children:[(0,r.jsx)(V,re({symbol:"ETH"},p("bid",{required:!0}),{id:"bid",name:"bid",autoComplete:"off",className:"flex-grow",disabled:H,error:Boolean(null===(e=h.bid)||void 0===e?void 0:e.message)})),(0,r.jsx)(Z.K,{working:H,color:"green",type:"submit",disabled:B,children:"Deposit"})]}),(0,r.jsx)("div",{className:"text-red-500",children:null!==(T=null===(t=h.bid)||void 0===t?void 0:t.message)&&void 0!==T?T:S})]}),(0,r.jsx)("div",{className:"pt-4",children:(0,r.jsx)(ee,{bid:F,minBid:u})})]})},ae=n(4341),ue=n(784),se=function(e,t){var n=(0,o.useRef)(e);(0,o.useEffect)((function(){n.current=e}),[e]),(0,o.useEffect)((function(){if(null!==t){var e=setInterval((function(){return n.current()}),t);return function(){return clearInterval(e)}}}),[t])},oe=function(e){var t=e.target,n=(0,o.useState)(),i=n[0],a=n[1],u=(0,o.useCallback)((function(){var e=new Date;if(t.valueOf()<e.valueOf())a("FINISHED");else{var n=(0,ae.Z)({start:new Date,end:t});a((0,ue.Z)(n))}}),[t]);return se(u,1e3),(0,o.useEffect)(u,[u]),(0,r.jsx)("span",{className:"FINISHED"===i?"text-red-500":"text-green-500",children:i})},ce=function(){var e=P(),t=e.gameId,n=e.endsAt,a=e.currentBid,u=(0,o.useMemo)((function(){var e=n?new Date(1e3*n.toNumber()):null;return{target:e,isFinished:(null===e||void 0===e?void 0:e.valueOf())<Date.now()}}),[n]),s=u.target,c=u.isFinished;return t?(0,r.jsx)("table",{className:"table-auto w-full text-left",children:(0,r.jsxs)("tbody",{children:[(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"Current deposit"}),(0,r.jsxs)("td",{className:"text-right font-bold",children:[(0,i.s)(a)," ETH"]})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"Time left"}),(0,r.jsx)("td",{className:"text-right font-bold",children:(0,r.jsx)(oe,{target:s})})]}),c&&(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:2,className:"text-green-500 text-center",children:"Next deposit will start a new game !"})})]})}):(0,r.jsx)(r.Fragment,{children:"Loading..."})},le=function(){var e=P().gameId;return e?(0,r.jsxs)(r.Fragment,{children:["Game N\xb0 ",e.toNumber()]}):(0,r.jsx)(r.Fragment,{children:"Loading..."})},de=n(4930),fe=n(6244),pe=n(3738);function me(e,t,n,r,i,a,u){try{var s=e[a](u),o=s.value}catch(c){return void n(c)}s.done?t(o):Promise.resolve(o).then(r,i)}var ye=function(){var e,t=v(),n=(0,d.Ge)().account,i=P(),a=i.running,u=i.endsAt,s=i.director,c=i.mutate,f=(0,o.useState)(!1),p=f[0],m=f[1],y=(0,o.useState)(),h=y[0],b=y[1],x=(0,o.useCallback)((e=l().mark((function e(){var n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b(void 0),m(!0),e.prev=2,e.next=5,t.end();case 5:return n=e.sent,e.next=8,n.wait();case 8:return e.next=10,c();case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),b((0,A.e)(e.t0));case 15:m(!1);case 16:case"end":return e.stop()}}),e,null,[[2,12]])})),function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function u(e){me(a,r,i,u,s,"next",e)}function s(e){me(a,r,i,u,s,"throw",e)}u(void 0)}))}),[t,c]),w=(0,o.useState)(!1),g=w[0],j=w[1];return(0,o.useEffect)((function(){var e=setInterval((function(){j(n===s&&a&&1e3*(null===u||void 0===u?void 0:u.toNumber())<Date.now())}),1e3);return function(){return clearInterval(e)}})),g?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(pe.N,{children:"Manual ending"}),(0,r.jsxs)(fe.Z,{children:[(0,r.jsxs)("div",{children:["As the last director of this game, you may end it manually and receive your deposit right away. This action will cost some gas.",(0,r.jsx)("br",{}),"You may also wait for someone to start the next game to receive your funds automatically."]}),(0,r.jsx)("div",{className:"text-center",children:(0,r.jsx)(Z.K,{onClick:x,working:p,color:"green",compact:!0,children:"End game"})}),(0,r.jsx)("div",{className:"text-red-500",children:h})]})]}):null},ve=n(268),he=function(e){var t=e.children,n=(0,y.L)();return P().loadingStatus?(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{style:{borderTopColor:"transparent"},className:"inline-block w-12 h-12 border-4 border-yellow-500 border-solid rounded-full animate-spin"}),(0,r.jsxs)("div",{className:"text-yellow-500",children:["Connecting to ",n.fullname,"..."]})]}):(0,r.jsx)(r.Fragment,{children:t})},be=function(){return(0,r.jsx)(S,{children:(0,r.jsx)(he,{children:(0,r.jsxs)(de.$,{children:[(0,r.jsx)(pe.N,{large:!0,children:(0,r.jsx)(le,{})}),(0,r.jsx)(fe.Z,{children:(0,r.jsx)(ce,{})}),(0,r.jsx)(ye,{}),(0,r.jsx)(pe.N,{children:"Become the new director"}),(0,r.jsx)(fe.Z,{children:(0,r.jsx)(ve.$,{children:(0,r.jsx)(ie,{})})}),(0,r.jsx)(pe.N,{children:"Deposits"}),(0,r.jsx)(fe.Z,{children:(0,r.jsx)(I,{})})]})})})},xe=n(9208),we=function(){var e=(0,y.L)(),t=g("INFURA").status,n=(0,o.useMemo)((function(){return t?(0,xe.Z)(0,1e3*t.duration.toNumber()):null}),[t]);return t?(0,r.jsxs)("div",{className:"text-left inline-block px-4",children:[(0,r.jsxs)("div",{className:"mb-4 text-sm text-yellow-500",children:["This application is a demo & portfolio app, therefore it is only connected to the test networks, at least for now. You may obtain free ETH for ",e.fullname," from a"," ",(0,r.jsxs)("a",{className:"underline hover:text-yellow-400",href:"https://duckduckgo.com/?q=".concat(e.name,"+faucet"),children:[e.name," faucet"]}),"."]}),(0,r.jsxs)("div",{children:["Contract ",(0,r.jsx)(u.G,{type:"Account",address:t.address})," :"]}),(0,r.jsxs)("ul",{className:"list-disc pl-5",children:[(0,r.jsx)("li",{children:"Deposit at least 10% more than the previous director to become the director of the bank."}),(0,r.jsxs)("li",{children:["If another person becomes the director within ",n,", you will be transfered your deposit back + 5% bonus. Owner of the contract also gets 1%."]}),(0,r.jsxs)("li",{children:["If noone becomes a director after you within ",n,", you will get about 95% of your deposit back."]})]})]}):null},ge=n(560),je=function(){return(0,r.jsx)(ge.Z,{title:"ETHvil Bank",children:(0,r.jsx)("div",{className:"my-4 space-y-8",children:(0,r.jsxs)(Y,{children:[(0,r.jsx)(we,{}),(0,r.jsx)(be,{})]})})})}}},function(e){e.O(0,[445,357,837,772,774,888,179],(function(){return t=5301,e(e.s=t);var t}));var t=e.O();_N_E=t}]);