(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[451],{7603:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/games",function(){return t(8868)}])},8868:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return _}});var n=t(5893),i=t(9706),s=t(8687),a=t(1521),o=t(821),c=t(7294),l=t(9921);var d,u,h=(d=(0,a.Z)((function(){var e=(0,l.L)(),r=e.subgraph,t=e.chainId,n=(0,o.ZP)("games-history-".concat(t),(function(){return(0,s.request)(r,"{\n    games(orderBy:id, orderDirection:desc) {\n      id\n      start\n      end\n      director\n      bids(orderBy:timestamp, orderDirection:desc, first:1) {\n        id\n        amount\n        director\n        timestamp\n      }\n    }\n  }")})),i=n.data,a=void 0===i?{games:[]}:i,d=n.error,u=n.mutate,h=(0,c.useMemo)((function(){return{loading:!a&&!d,games:a.games.map((function(e){return{id:e.id,director:e.director,end:e.end,amount:e.bids[0].amount}}))}}),[a,d]),m=h.loading,x=h.games;return{loading:m,error:d,games:x,mutate:u}})),u=2,function(e){if(Array.isArray(e))return e}(d)||function(e,r){var t=[],n=!0,i=!1,s=void 0;try{for(var a,o=e[Symbol.iterator]();!(n=(a=o.next()).done)&&(t.push(a.value),!r||t.length!==r);n=!0);}catch(c){i=!0,s=c}finally{try{n||null==o.return||o.return()}finally{if(i)throw s}}return t}(d,u)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()),m=h[0],x=h[1],p=t(1163),f=t(3455),g=t(3471),j=function(){return(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("div",{style:{borderTopColor:"transparent"},className:"inline-block w-12 h-12 border-4 border-yellow-500 border-solid rounded-full animate-spin"}),(0,n.jsx)("div",{className:"text-yellow-500",children:"Connecting to Ethereum..."})]})},y=function(){var e=x(),r=e.games,t=e.loading,i=e.error,s=(0,p.useRouter)(),a=(0,c.useCallback)((function(e){return function(){s.push("/games/".concat(e))}}),[s]);return t?(0,n.jsx)(j,{}):i?(0,n.jsx)("div",{children:i.toString()}):(0,n.jsxs)("table",{className:"table-auto w-full",children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{className:"pt-4 py-2 pl-4 text-left",children:"Game"}),(0,n.jsx)("th",{className:"pt-4 py-2 text-right",children:"End"}),(0,n.jsx)("th",{className:"pt-4 py-2 text-right",children:"Amount (ETH)"}),(0,n.jsx)("th",{className:"pt-4 py-2 pr-4 text-right",children:"Winner"})]})}),(0,n.jsx)("tbody",{children:null===r||void 0===r?void 0:r.map((function(e){var r=e.id,t=e.end,i=e.director,s=e.amount;return(0,n.jsxs)("tr",{onClick:a(r),className:"cursor-pointer hover:bg-green-300/30",children:[(0,n.jsx)("td",{className:"py-2 pl-4 text-left",children:r}),(0,n.jsx)("td",{className:"py-2 text-right",children:t?new Date(1e3*Number(t)).toLocaleString("default",{dateStyle:"short"}):"In progress"}),(0,n.jsx)("td",{className:"py-2 text-right",children:(0,f.s)(s)}),(0,n.jsx)("td",{className:"py-2 pr-4 text-right",children:(0,n.jsx)(g.G,{type:"Account",address:i,withIcon:!0})})]},r)}))})]})},v=function(){return(0,n.jsx)(m,{children:(0,n.jsx)(y,{})})},N=t(1253),b=t(4930),w=t(3738),_=function(){return(0,n.jsx)(N.Z,{title:"All games - ETHvil Bank",children:(0,n.jsx)(i.V,{children:(0,n.jsxs)(b.$,{children:[(0,n.jsx)(w.N,{large:!0,children:"Games History"}),(0,n.jsx)(v,{})]})})})}}},function(e){e.O(0,[445,709,458,347,774,888,179],(function(){return r=7603,e(e.s=r);var r}));var r=e.O();_N_E=r}]);